# Kakeru ビジネス分析・収益シミュレーション

## 1. 現在のコスト構造

### OpenAI API コスト（2024年価格）

| モデル | 入力 | 出力 |
|--------|------|------|
| GPT-4o | $2.50/1M tokens | $10.00/1M tokens |
| GPT-4o-mini | $0.15/1M tokens | $0.60/1M tokens |

### 機能別コスト推定

| 機能 | モデル | 入力tokens | 出力tokens | コスト/回 |
|------|--------|-----------|-----------|----------|
| 添削 (gradeWriting) | GPT-4o | ~1,500 | ~800 | **~¥1.8** |
| お題生成 (generatePrompt) | GPT-4o-mini | ~800 | ~300 | ~¥0.04 |
| 辞書検索 (lookupWord) | GPT-4o-mini | ~500 | ~300 | ~¥0.04 |
| 今日のお題 (getDailyPrompts) | GPT-4o-mini | ~1,000 | ~600 | ~¥0.08 |

※ 1ドル=150円で計算

### ユーザー別月間コスト推定

**無料ユーザー（現行: 添削3回/日）**
| 利用率 | 添削コスト | その他 | 月間コスト |
|--------|-----------|--------|-----------|
| Max (100%) | ¥162 (90回) | ¥15 | **¥177** |
| 高 (50%) | ¥81 | ¥8 | **¥89** |
| 中 (30%) | ¥49 | ¥5 | **¥54** |
| 低 (10%) | ¥16 | ¥2 | **¥18** |

**有料ユーザー（現行: 添削15回/日）**
| 利用率 | 添削コスト | その他 | 月間コスト |
|--------|-----------|--------|-----------|
| Max (100%) | ¥810 (450回) | ¥75 | **¥885** |
| 高 (50%) | ¥405 | ¥38 | **¥443** |
| 中 (30%) | ¥243 | ¥23 | **¥266** |

---

## 2. プラン設計の提案

### 推奨プラン構成

| | 無料 | ライト | スタンダード | プロ |
|--|------|--------|-------------|------|
| **価格** | ¥0 | ¥480/月 | ¥980/月 | ¥1,980/月 |
| 添削/日 | 1回 | 3回 | 10回 | 無制限* |
| お題生成/日 | 5回 | 15回 | 50回 | 無制限 |
| 辞書検索/日 | 10回 | 30回 | 100回 | 無制限 |
| 例文表示 | ✓ | ✓ | ✓ | ✓ |
| 学習履歴 | 7日間 | 30日間 | 無制限 | 無制限 |
| 単語帳 | 50件 | 200件 | 無制限 | 無制限 |
| 添削モデル | GPT-4o-mini | GPT-4o-mini | GPT-4o | GPT-4o |
| 詳細分析 | - | - | ✓ | ✓ |
| 優先サポート | - | - | - | ✓ |

*無制限 = 1日30回上限（Fair Use）

### プラン別コスト・利益

| プラン | 想定利用率 | 月間コスト | 価格 | 粗利 | 粗利率 |
|--------|-----------|-----------|------|------|--------|
| 無料 | 30% | ¥18 | ¥0 | -¥18 | - |
| ライト | 40% | ¥22 | ¥480 | ¥458 | 95% |
| スタンダード | 50% | ¥135 | ¥980 | ¥845 | 86% |
| プロ | 60% | ¥324 | ¥1,980 | ¥1,656 | 84% |

---

## 3. 収益シミュレーション

### シナリオ A: 保守的（1年後）

| 指標 | 数値 |
|------|------|
| MAU | 1,000人 |
| 無料ユーザー | 850人 (85%) |
| ライト | 100人 (10%) |
| スタンダード | 40人 (4%) |
| プロ | 10人 (1%) |

**月間収益**
- ライト: 100 × ¥480 = ¥48,000
- スタンダード: 40 × ¥980 = ¥39,200
- プロ: 10 × ¥1,980 = ¥19,800
- **合計: ¥107,000/月**

**月間コスト**
- 無料: 850 × ¥18 = ¥15,300
- ライト: 100 × ¥22 = ¥2,200
- スタンダード: 40 × ¥135 = ¥5,400
- プロ: 10 × ¥324 = ¥3,240
- Firebase等: ¥3,000
- **合計: ¥29,140/月**

**月間利益: ¥77,860** (利益率 73%)

### シナリオ B: 成長（2年後）

| 指標 | 数値 |
|------|------|
| MAU | 10,000人 |
| 無料ユーザー | 8,000人 (80%) |
| ライト | 1,200人 (12%) |
| スタンダード | 600人 (6%) |
| プロ | 200人 (2%) |

**月間収益**
- ライト: 1,200 × ¥480 = ¥576,000
- スタンダード: 600 × ¥980 = ¥588,000
- プロ: 200 × ¥1,980 = ¥396,000
- **合計: ¥1,560,000/月**

**月間コスト**
- API: ¥291,400
- Firebase: ¥30,000
- **合計: ¥321,400/月**

**月間利益: ¥1,238,600** (利益率 79%)

### シナリオ C: スケール（3年後）

| 指標 | 数値 |
|------|------|
| MAU | 50,000人 |
| 有料転換率 | 25% |

**月間収益: ¥7,800,000**
**月間コスト: ¥1,600,000**
**月間利益: ¥6,200,000** (利益率 79%)

---

## 4. コスト最適化戦略

### 4.1 フロントエンド最適化

| 施策 | 効果 | 実装難易度 |
|------|------|-----------|
| **Vercel/Cloudflare Pages移行** | Firebase Hostingより安価・高速 | 低 |
| **静的生成 (SSG)** | サーバーコスト削減 | 中 |
| **CDN活用** | 帯域コスト削減 | 低 |
| **画像最適化** | 転送量削減 | 低 |
| **コード分割** | 初期ロード改善 | 中 |

**推奨構成:**
```
Vercel (無料〜$20/月)
├── 静的ファイル配信
├── Edge Functions (軽量処理)
└── Analytics

または

Cloudflare Pages (無料)
├── 静的ファイル配信
├── Workers (軽量処理)
└── 無制限帯域
```

### 4.2 バックエンド最適化

| 施策 | 効果 | 実装難易度 |
|------|------|-----------|
| **添削結果キャッシュ** | 同一お題の再利用 | 中 |
| **モデル使い分け** | ライト=mini, 他=4o | 低（実装済み案） |
| **バッチ処理** | API呼び出し統合 | 高 |
| **プロンプト最適化** | トークン数削減 | 中 |
| **レスポンスストリーミング** | UX改善 | 中 |

**添削モデル戦略:**
```typescript
// プランによってモデルを変更
const model = plan === "free" || plan === "lite"
  ? "gpt-4o-mini"  // コスト: ¥0.12/回
  : "gpt-4o";       // コスト: ¥1.8/回
```

**GPT-4o-mini での添削:**
- コスト: ¥1.8 → ¥0.12 (93%削減)
- 品質: やや低下するが、ライト層には十分

### 4.3 Firebase最適化

| 施策 | 効果 |
|------|------|
| **Firestoreクエリ最適化** | 読み取り回数削減 |
| **複合インデックス活用** | クエリ効率化 |
| **オフラインキャッシュ** | リアルタイム同期の抑制 |
| **Cloud Functions最適化** | コールドスタート削減 |

### 4.4 代替インフラ検討

**現行 (Firebase)**
- メリット: 開発速度、統合性
- デメリット: スケール時のコスト

**代替案 A: Supabase**
- PostgreSQL (無料枠大きい)
- Edge Functions
- 月$25〜で大容量

**代替案 B: 自前構築**
```
Cloudflare Workers (API) → 無料〜$5/月
├── Turso (SQLite) → 無料〜$29/月
├── R2 (Storage) → 無料枠大
└── KV (Cache) → 無料枠大
```

---

## 5. 推奨アクションプラン

### Phase 1: 即座に実行（コスト削減）

1. **無料プランの添削を1回/日に削減**
   - 現行3回 → 1回で月間コスト66%削減
   - 有料転換のインセンティブ強化

2. **ライトプランでGPT-4o-miniを使用**
   - 添削コスト93%削減
   - 差別化ポイントとして説明

3. **今日のお題をキャッシュ**
   - 全ユーザー共通 → 1日1回生成でOK
   - 既に実装済み（getDailyPromptsFromCache）

### Phase 2: 短期（1-2ヶ月）

1. **プラン体系の導入**
   - 4段階プラン実装
   - Stripe連携

2. **Vercel/Cloudflare移行検討**
   - ビルド・デプロイ高速化
   - コスト削減

### Phase 3: 中期（3-6ヶ月）

1. **添削結果のキャッシュ**
   - 類似問題の再利用
   - ハッシュベースで検索

2. **プロンプト最適化**
   - トークン数20%削減目標

---

## 6. KPI監視項目

| 指標 | 目標 | 計測方法 |
|------|------|----------|
| API コスト/MAU | < ¥30 | OpenAI Usage / MAU |
| 有料転換率 | > 15% | 有料ユーザー / 全ユーザー |
| チャーン率 | < 5% | 解約数 / 有料ユーザー |
| LTV | > ¥15,000 | ARPU × 平均継続月数 |
| CAC | < ¥3,000 | 広告費 / 新規有料ユーザー |

---

## まとめ

**現在の課題:**
- 無料プランのコストが高すぎる（添削3回/日）
- 有料プランとの差別化が弱い

**推奨施策:**
1. 無料プランの添削を1回/日に制限
2. ライト(¥480)でGPT-4o-mini、スタンダード以上でGPT-4o
3. 学習履歴・単語帳の制限で有料誘導
4. フロントエンドをVercel/Cloudflareに移行

**期待効果:**
- 無料ユーザーコスト: ¥54 → ¥18/月 (67%削減)
- 有料転換率向上: 15% → 20%目標
- 月間利益率: 70%以上維持
